apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kaamebott
  namespace: default
spec:
  interval: 120m
  chart:
    spec:
      chart: app
      version: "0.0.81"
      sourceRef:
        kind: HelmRepository
        name: vibioh
      interval: 120m
  install:
    skipCRDs: true
  upgrade:
    remediation:
      retries: 3
  rollback:
    cleanupOnFail: true
  values:
    nameOverride: kaamebott
    image:
      name: vibioh/kaamebott
      tag: "202206281219" # {"$imagepolicy": "default:flux-kaamebott-api:tag"}
    config:
      KAAMEBOTT_DB_HOST: kaamebott-db
      KAAMEBOTT_DB_NAME: kaamebott
      KAAMEBOTT_DB_PORT: "80"
      KAAMEBOTT_DISCORD_APPLICATION_ID: "882376778943971349"
      KAAMEBOTT_DISCORD_PUBLIC_KEY: d3acdcf3d7dc08c1d32714b3a51b0db4e40041059e075b274d94326011c20a31
      KAAMEBOTT_LOGGER_JSON: "true"
      KAAMEBOTT_TRACER_URL: http://jaeger.monitoring:14268/api/traces
      OTEL_SERVICE_NAME: kaamebott
    secrets:
      KAAMEBOTT_DB_PASS: AgBH2EKOwsCsOk6FvOgKjyWjinhhOq2XYfupNsNkXU3zh+uP/hFnA+CnUuorhrgLItCmk8XPY3RPrfcI5PPN7/qiWfGS8FfUlPEogB7nM7kBvY9pym6VxmGk7Qut1t7HSEz2yFRcq8jeC80tUoxsdLcx85dc6qHcelDFECOqtMsz3EHQJbTDSpTB91x6a/Smg97xp3XocQKQ8Uw0ZbaJ49l4WMbRuejRz4eTefS018Poz9tK8J2gGHAfsm4luyMBLsz2X/whGGbZvwTjodd1qe5PSDGpcc6U6gOQ9vlfEK095aoemWkLAIutcOl5uAJa3aEkv3rXVarppEHrroewMnpsHUQYS/FBAmUVEpfW2nc3Qkx+bQvvtfASHh+AqUkeSwTyjntbtTxziGceShTZqj9WAx0TAyaxtW5t+1/aDpFsIF264ljRp9NjQHH8scIlNOOOsUs+3n0ZXNsTJdpuNx8b4suo66XddKugL8z57qSMeyOJT7OHv+iafsYUQUz4wfnZOinDQjTcGH/a3qJ7ruSuuUv/WhJZe6oys/5EXJR2LGruEfho9m+Okj3a4/bupofxebeie+ilos8SqPeO7qsIXKobm4XtHkusQoXxSyIcxBigMSYdDlvOaNnCooC9llMxOalBl/AINJbhbiE086HGOwAT+IF3b+s+/A5AS0VP0qsnMp5tJmY8YfGfK3gRX7rmCoY9EMhYYPh1cjl2OwV0fC8cOe7NkOlZ3RF6Ejbjh8Ola741wq4wgCciyLA7ucHqb6H7FlBCMD+AlGk=
      KAAMEBOTT_DB_USER: AgCu0+C2lIBiPtsh/EJFjSlTcZXDDEeIjRIlSzHllGhpZxkCpjxVUmOM0DvHXbx9MNENSDLV/IKraXsbDmlb68Lz5E+LifG4fPTZ9w5hdEM9d8Sao+O4LB3+Y3Q/i7VTuQ2O4QEy+pzGxH87kCfZKs8ZDeT9DAejdckZ1rOU9juPA9ZEzj7Ku1bXOaqm2D6jn8jOK8cvOVd6T1Mmta7CPb9/G71DoU/WoS7LamKcbn4/JACHUyFZ3V90nFeQ5w3ZkjtIkcCt24up/LJ1WT4QeFvIr5yum9fMHasv5fWTVvXSjrSQzKS/sWvayQe31YaoGGiUdBc30ccZCdKASwddBm8WT76qDb5RXfH7yJmD5fA3eTGaxi3hYOCUoBvN/vhOahCqzZuj9jGAI0OepXHibVZkNvmGSBAwA/77Sje9supvmnOD1FeqDFTKjCH8dIZlHAJTxs1q2IN8T7Wa9UgdVQLXPlRnIMb14SwLC6pRLl0BO8cnluSBczSE14HN9UoWZVNzYrJRrvNjUrhRnJcem1whIpZtdt/l6801NYnbFmI2W1srm/lZaJaTNLRbbH753SiRA89gvv/7ehFW9cD5P1bVbvwhu9hvtq7xmUPm1R9jdGudYGf38dOhlnIYY5jII57CeXVWZG+KPPQgw1W67/3Xp0kldkujEgM+3UAcVomQa60H0OeSrlcIH+XXWrRCSl5xQrceSgxXwhU=
      KAAMEBOTT_DISCORD_CLIENT_ID: AgBk83wuKbmxa5LBb08NscXaTQ1TdQ2R229qv5jqp3vlATrUJ97zs2K0bFfvMx6jvnrxsCYH/rFeCa0JNdk+BmD4elWKefzXkU7gAUNPnU5FBQ7dXwxQEqSfcOW7NmpOWEZuhEcMymwpZO1e2EqyvviWMVaaYNMSHcUyP2uwvJb/xv6SPn/beBsc0jnd7uBaY7xFuwqADUieWshz96To0s17eigHFVfDc3gIEn4uKSoOlAuQLrXxETYFZRHvGPHWVB4l6VXg321AufMNdSTyp4iEIKnE3hASFjg3Ckjb+NB12FVqqmCrJzNfDfLpPnrmej9pjTD6TUt+fRrw3i7aHisBcmA922/5ghEQtVLAOemjaJs2mTwrg82QUita4zO3/kh5r+KUtTGI0ievSCVnXfceBH+725kRRkVPT93VEVCk1MU+0FMw4UNMxxQQNYHvHdZOTkuNAozi89Wxz/0lJoP2yFy6gQ+wxaQLnu8kHZO9hZuutxVw306pJsVbjRA8Pve1L86Ux+cq9mBKrOJmO5uJ+V488c1FnhlM5rrSvTjQSu7aRi0lTc8/hu1cNbTjmqjaXHtwQLBBfULcasdRKvO6ywu8iJT3ki1xqpy/SAiMxwxidqJNgggmOnpM9xxahtLaCLFLfbveuMtcwOd+cvtMrdlwADJ/GbyMl76fn8c0aYiYwoVAPVHN2/oAGGum5IxZV6MO7HeWVzCJI7cldTLmDVA=
      KAAMEBOTT_DISCORD_CLIENT_SECRET: AgCV8ES22yewtyKXXuuH9KW1UPkjtCBsaz3E+XlgGH6LKgYwbWO+sFAubybveUwOeQIFn4avR8swJpS5qjaeq8JIbT4gdY1ntfOtTwkYkOdCDyxAOWavixyNcf3l2AABllgeHdMdN2BcbV7B7x49Z1jK0m5meIoXPCb7reabuR8ZkHX5ZWie30XjT/1+/zrQ5+qGQzLrDthMPn/fYL/N2ud450Xk9I9u+u/Wh216Hon2OC8nzxoMcN0LiANQG/Ut1KF+S+IPPLI/1D/3h+3Zlc4qqlgpNecSDD/gNWtxYXcO0UVFVq+kc/UB9lyGko5tiku1C1pxsjrS8HrcUfEIZGQ9DNIjK/7bGLH42+l1zzBWkmNoVQ1ooa92DjTVTuWD0aAnTwzVNYs5Yr2Fos3MchvRgbayWC2f9wZUgOOse/c1+vg8U6rhlJzO7AcLUQWD+PwrnSRp+/NsjownxmUyO6OaZCgLe0AdOwN/77ZH03S4SWP/USQFw0w0EVbaMLRdULCjQAxhHOSkINaIiyDI4/5m/3okqqjYLheWFuX/9jJa652uvqTixTb4sji9glXepNGbdZXOrDD8aBDoLxmJpE8lVxYy/acp0YVg6R0lvT8iQR47zEYP2WdX3qM1iF+mNMDYAqX3aaN/SQTkq5zO4PRaqGGx85ZctXaQ8gvI2Jo7GChHscJn4XcFJpKaFZjxsKNyqTATV0GA0qGNYucnhAWByp4XchJg8bsdY8wDaXdZ0g==
      KAAMEBOTT_SLACK_CLIENT_ID: AgAZGHTuoZRCkwuos/jasLbD83t3RYLtrXZ9lmTVaWXfJfoAmt2FElbXLNUBo2Ifjj7yKc9s/0jiqBmgGYRKcfbwtLc07FirxgAt4sSJQFLo1LUy/HZfQAbpIltXT2ORFQ/ztCL/Ig02sHaNQTUd+BmB7XNQ15ermIQVjb8QxmDU3htPtVwFQQn1KNYnv2BIXBNqXOb0uimMVB0yWPmaf/lq9JW4EqktPoj91qSCgg0o4wSFLxzqa+Rw9mx36TwForLywQ5R9hGA0xE/1Ufdl43Hi+ZAtHsCdq+1tGenH1UY4+bTNoiJwB/SBWWulBe5yaQEE541FW2n/PsvVmJue/CyfxegbiSftDAGdG1nwEU602c1h6iWbQqT3GfzIH3+tbGn2njmVd/lUWdjsxWQgSnXVfDwXaJ1XlUens04+8juyp3rDeahJZuCubk83kpxpIAfz9vITqAEzRnanajPEz7Vb4vVI5zqvzpAw5MRNlGXFY1wMLR8/vWrxA/l2D7pO0NQflBkGuVkg6ZTKDIoYPsWgG+w9s2e96bey+WmmGQdPpzSzaNoOZdrHWqRBnc2C8+jn/QruKp6RbFOEQR4pGcJF1acKadjmrnB34EZsejOIeHzyIeDCJa+OC3Ls4QhKNb66KFCITpQJbTAm+EhV4hLl/6gsFi7ivjmaMTgLHG8FD+xXZ5uqQ35waTiF1f+2yvyYEVIbWvRFiTWfH+N0npdyXUb1wpN/CSai1A=
      KAAMEBOTT_SLACK_CLIENT_SECRET: AgAneQik9zQIXkrlIX3SxC/pvXT1D8Jk5ZCMS8DtNRYn2IPeQ1Hs6+2ZoAZkNjIKvNx1fyY1is+cOZRnqvopAzolKRahO7208c8NM20rcoGYRtK9/LB7CjVdPOfu5PorQMSHx/95Bevvd+PSde69IK8NphLXo0bKN85b+8Z1mdHaz+zhM6+gFas06upUC0L44lal1pMrutK+1pxHLK7ibC7ZdRmHVffTnkkbTfvB9AcX5og6oeYc2mEM2EdGqOFibZS73vV2GAIUYPwdVrhIED8KzTxsraQx8hkPol5owrGyji7NPVVCO1o3B81NrhVJSi4W5UCLqCFTp9d1i8QY1zUBkpDBVA01+qfqzsj3S/sF3DaWfkZJUwfNaQjCQwKXnhJ4406ejVy92XKpDMEsrVW9jq+DF2jV51xlYvEfjGoUo0bLhbTo3T0UiU14rS7gaBx4hbdrbofaXphlkOMwZSmskRCAs4l9K3xNibCq+zUbJOdEIqxe9MBA/5u3F3PKWZ/Cg1BERa4TqbINkET7G3GWTbR9Om51ss7K/5f41MtKDyU34Gkw/mzDwAC93okDxudPnM4ngAVSlCA7hJYzGfF+O7JvfrL8nTx6iFDx63eOeov0f9bj/Ji/9x+sIJwpuVhJsmCY1OH99OGAvgu7tHqJTE85bPKCpnntt02TI3uEwctLr5TU/OD2CAMuTPv7V9TMTYWtW4suUwgaz6ZCfBeAKYFhuiz3bctiZwKBGQAe7A==
      KAAMEBOTT_SLACK_SIGNING_SECRET: AgCFWnu7E2pScO0Y7owz0s67lrZZFcJsAfK71Lq1Nb01scdunFjLJ+ZfBfLu5yxWTz3xYbKeP4AZOYzQ/1NEHeigZPVOGoxFumErEHzve0g42CQhiIs9c9roMaa5qzER3MnQ1QkhKnFIbYPdp6VahS3KMLI+CLfXvXwd/Yr2oMQmWjD0BdaQ7PKCpMx2n7mKkhz1FehtdXpN7cXAtsUQPTI3sYVVP6iGE0SxxdA+Pji2fUBOEUse4TB+LA63/k4gaPXmP6pdQAIWnZ8iSGFI69XEv1FOUEhbRtJVowiqjGRBRhcsrVNZrbj4+FOEC8FMLb37idldJI1aWMXLa4UQR7RdJQ5p3e6dwZNTp6Qb8sciGcaq7bDsiD8DhvYWznvTvpUxinlNWNzEv42zQgB561LHiixCJyVV9z4myqpfc/r0HagN55/9tqWmrNxyUcaV4W4Zz2iybY1ToTg6w0Z1ItlZXzDOQlSwvjvj8Nb/v7SltQNxzgWbzWArCLull7bwL5Kuocg+KMByCIMkWbAuoOnacloaT2DSwfLWfPAp1grEipPClkQ77iWCC/W+3E68logBWRVPs91ZidD4RDivAoeJOfHPz6O4kXrytbPytb4Z9GHt20BIA7WC8KVzC4goZ1NKlr/OwnoHXM3NtswhS0flnN9XKm9TCg8EiHa58i9fThbVJ6ovAjQf+r8UjTdWAMwkER/waME27LMj4A0l0GmXy72UWVrvAF8PSpQv618QOw==
    ingress:
      enabled: true
      hosts:
        - kaamebott.vibioh.fr
    affinity:
      podAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: app.kubernetes.io/instance
                    operator: In
                    values:
                      - kaamebott-db
              topologyKey: "kubernetes.io/hostname"
    pprof:
      enabled: true
