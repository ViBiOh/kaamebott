apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kaamebott
  namespace: default
spec:
  interval: 120m
  chart:
    spec:
      chart: app
      version: "0.0.86"
      sourceRef:
        kind: HelmRepository
        name: vibioh
      interval: 120m
  install:
    skipCRDs: true
  upgrade:
    remediation:
      retries: 3
  rollback:
    cleanupOnFail: true
  values:
    nameOverride: kaamebott
    image:
      name: vibioh/kaamebott
      tag: "202209171010" # {"$imagepolicy": "default:flux-kaamebott-api:tag"}
    config:
      KAAMEBOTT_DB_HOST: postgres
      KAAMEBOTT_DB_NAME: kaamebott
      KAAMEBOTT_DB_PORT: "80"
      KAAMEBOTT_DISCORD_APPLICATION_ID: "882376778943971349"
      KAAMEBOTT_DISCORD_PUBLIC_KEY: d3acdcf3d7dc08c1d32714b3a51b0db4e40041059e075b274d94326011c20a31
      KAAMEBOTT_LOGGER_JSON: "true"
      KAAMEBOTT_TRACER_URL: http://jaeger.monitoring:14268/api/traces
      KAAMEBOTT_REDIS_ADDRESS: redis:80
      OTEL_SERVICE_NAME: kaamebott
    secrets:
      KAAMEBOTT_DB_PASS: AgC2j7r1KfVZqU86G3I9H1jKg4iYVq10G29RYP7CEtkuFy17kfWSX9NMxhc3K6z6yWCx32AkInWdxEDM5NuGxC94ZC3Z+46ijJmjwefJQcvt9B/pJEziIyFK9o7IOkCJKq2CQotoWjdn0ORUmuRdIcfX77V/vRncdHDUEYrQjnaLw1l8xUaBqePdSp3BDgAJK7kBTN8L34tDf4SkvtM50WeDI+r7HY8+//As+byqWXMXd8n/BFPw89fKZ1JHCylSsyVm6SMWwgx5eU1wyrFYmrN/nLk1e/GCuUighrMiUcAFuxvnGPb8eA0Oy7LGHLUVvSkh0yFbEJpAFYEyOSYrZOtzjuviyRHdRc/wty3UwYecjprHMklTMs1f9VpC4A+2LOH0YRU9gup7Vg0Nvsdi5XxHJCDJpsL+J4/EMqbl2jKq2JYAw+c3o1nTIU2CPTbfHBymP+Pw8uIic6D8nq0cfjBwmp6rZFkjR897D1QK1kDoW5dqUpM0obS8l1IZTJ92GyZzKMs+rLWsNKBdmwD2C+1MRzBI2cfTYOxl8sl2heRsA6CB8htCwQZtUC4F5TQUmKW7ChJ0DbblpA3czIQjzrLsGYIemUO5/UrdRzULmHlwblswz3F1yFSTtuk4FmBWJ+R7zfjMOG7soc7HgrS9CUGBrB8Lh8F1C60YuodKSdd3RBWtqRbazfUzwD6900GAW3nK97lWNSsIpsztnN+OvYUIqTCWnQQ+BUJOVf6a4WLV/ig87UazCYTwWsSmfGnw1tR32zNkLkgwuZCdBcU=
      KAAMEBOTT_DB_USER: AgC6Gflz7qUtQIIbPyqxv2Tv/csJa9QAdXdz83PfXb8yDfneMl6M1rbio2zLbvy/PlSAEEh68lIMe672VX7w7JyFVUyr9Zu4bb0DabnNkMyP6oI5OGLsAkTjuwkZk2mFTORyLiFWDptsN7SARVGSqUwTEKCAZxKcPX3Zu9zMrEj9LXbcJZ2IXSac5XTZMsOAtDaUvaiUW5SvYm6bbk8TEa63mdiyEQd+et6VP4x+yI7G6zgo0PLJVWtDqMd45/GQFy6Q+bOryCvoHYSmzEoXydhRTmJ2+Gf3mDFUQ+9cZJaQVKhU9dWoTdwObdFCdhaCaSa1983+VIMjq9B1mxABDvzO3E48FUSt+umXlpeUYORFvuTGnwK7KMVHF0VI7WAOlqFxnn81WCiBFJMecd5LnUSKjlsVK0Dq0e/Sv0F5ifTW2GSNPS5LCUI3+ZvdyGjMZuNofNTSGDPWlmUilDP/PMj3QXAiYNFjX7ouU/l2fR6o2Toxr0+QPVRLXC/RBX68xBfpoG7xL5KyrCmNiBjItCawAKLSTStrRV4kGaCbRBXlicxRZHG5mR2xgtQBvUY8+Y503YytGGGNAd0R62jdH38TXcNv5VvkrK+8ZVTZ3/mQvCnbSu/hSdIJ2LZx3L4q/b53xgq59GYt16Yql5JHfpZC0b9zZ20F+C8W+jTRWs2sWqRLcfg9d2QVCDtJ4ZW/yRBlVy7cmtOyJto=
      KAAMEBOTT_DISCORD_CLIENT_ID: AgBPnjjD6pwkTLnQNU0AR0bXrC9Y7TvfWVbDOaeIxQcnWrKSeBKNQ3joky0PJALfGrmd8L35vQ+UGyAEGlI+xa9N/AIoCMi4oiGaUJ2y5xdtD/gGlYvHjyqqZYnnEt9aoc6Gg+k1mp1XbbwiX0mOqE54iTOS4O7zKG40HTvgV7RC9IFQFG2hhIzihVLK953UYiGcH/3FxwhijCkmc6vdLehY8ckkg+DGELp1TPommDSSSDRBFh+di8cQfG4FPwrB5kS34tUdf5cp6GOqfHthV/YDbrSuDbGLgwJKA4FieV8X5JFg9WwZ5aNZ/SUOHMTB7kK+6X6U1mZIZX3XsfNUA1lj8Kf1lLayu+ZTgU4HTT2Vq80SBCj3r31nJy2z6D+IP0KXU4mSvOzyYLl3AYn/hjFnt98Fn4XgCixangNtZUFS/TQm23CTUhyfljGqnDZcRBcjRvbnd/F9tjL7hxaH2Ct15GIQGC1jhZZ+Z3BEcliAENoEW7TGvVR0J0rqsKatYqKeE+xH3Skd0qCzMCTYbTCyApOioLweqTkH29Xm8VnXzPncy8piT36NKxsx9nF0fNNGGRpeL18k2Jwwj8GwH7F6cHLhpZpqHy3bKRtnnHpRTaUbrcSA9XuiVWDtMdsJWxhE0QwBs3Kr2/3oaRms14OO4dwGVxuHCvMGACdqZ4pjoNiT2DCSzI7o2LnwTSY6tV45RD6w/5rpXRKoRZl0/B8ups0=
      KAAMEBOTT_DISCORD_CLIENT_SECRET: AgCL/AhWS+DwXoVaNYdRp2syzkadWb/iMhHJ9r5xCwxdXqyBrMajwXM8Yoo355HnuqkNuyQwNnJ25IDFfclFX4tvUxoOlcfHCHEa5Buhq7nL8Ecbt0ZxlXXrOjLOvEysY3qH4lEpYKLPzrq8UMt++4GykSuap1OArI+KEm17uo9iS163B4HmJHu/Mtkdr3+DEpDVPCvpcMd4Qjzaw+r6+ufEZht/pcbmW6islU62bs61Rt43DLHZmvbgPVIdz4YFDv89IobB+ThHBWZsArqyKk/H5VnYNOU9WOI9F3DbeJ1YwcBLa1ssWJ/bXg4Kp1a0oKcuhCRWzKh6tZrtxQmwx/xUnsaAoPkL3b/ZvosM6yRfn8vD4hvTu/FMxFNl9sHPcnu4mRFCFdJnQWKhyrAQQAaHIg9XxVEjJLcFy4ozSLAfzLgATPAu/7AGikQUaGz1UXwSqXqov9hM/TxlhGFErmC89Jxzg4PQTi1YLAS/2AlGcs/Bmip7TBxYFkCZZd7BazVSxoncsaJ0SkGEmnJFM7/oGcrVZhxpy6O1KjIJZSqAZM46cXjcy1XRrfR93WCtH9NRc6gKaFhWXlLWCtuFOAkQzUWcVccqF8JbxLXQ0hgrwpQwsTJmwlLNqvuWnOHyLpGF2wyahzXHRZWxlSgf0lAxm5TLa6ByVYCxQToujlXUEJUAyriWE+BFQJvjUk56dR5tjhglf3e37d+IlFN+Q16K7hOCI87hi5dDinKdUsyY4Q==
      KAAMEBOTT_REDIS_PASSWORD: AgBnx7YCFLk+fBzO5i2ejCHBGrNP9wWXen2o9k4x4gsZz138wjWJff5jNHNlHtq6BiX42pkW0yLIsJjxV7fE5x1jzFbOC5s0Dx1dUd28eT/Bv6JjEtciYfiz2jjFq4qz4yNokw0SYNLa17y77/GCKl9n2nOIuqK9/+XazLYoBAuFFxkYXrZTUUQWcXfmKodONnRu5JLV8E8iqHC6Ur8sJ5M3h1Sr18/y40A0CNLRlscYp13HnxAEtC3znZRagZ6l09Al95BUNtMZ4LIaDBzi4YkcIHvpS7gPeae3EmJq4UtOLRPKJ+M+KM1DsZ+fu6QPAoQ0TJPhcj867RU6gC9xnO/V6rKCp4r8kAIep4gKEzhLj9tHAVhWqJeJePJK28tKAg4X0hRhNcqgrpTPj6RF5ARDpv4WPVh8bLcwMGq/eUIlKavpGXWCQXson11FWhqEoMM+48bR0fvhI5j1FUsPPSxG83hWTdrECfvoJpWxHaS6l+U1PvV+7tvlx37MWzzquMwJWlwkoK+6JHFT42/fb1ZSneZ1a93bsm6/a4yoUTEwdWbxj5Wb455idIFUWB0kOJtgZEJP78yEFTwvc7HMSsJscpVvEe9vGIMmvdsqKGykmhYxTisF+13hv9zd6MhNOei8UNRVo5foutewybH531/zLT7yNlK7O6oD08pzVqO6+CbT/3xZxBmtezVtH4kb09LbV6uCK8D7eubhSwXv3qUsUosNb4VtRIFTa+/7Ev9url/4YPZsNO99i1oPp61kuLneXZA5J1URxzurfkFqg38=
      KAAMEBOTT_SLACK_CLIENT_ID: AgCK6ic37qBvKpxrK16L8fdY+Jva04rgcZGPxEI8OiA1Jtm/JNPa11fdXEufvxkvxwO4A+YUFVzEpNsfYakCHR6T8gJRmzdz4HiflRMHbAZDqLdIKLjhWnyEtUX1Zq6hc16LlGdl6tJWKBwu6fZ+PAf+ANir+aRKpl4Uk7lGI8khHiSuUjSXhYvMwXuZKukREHLx0Ae/gCtvDjzofE9jWS8VL4O+F80GumYTcFPqgrvjICwklHhrGimTHCeHhzMOTF6DzSCT14RQhhwHpZmiQe7sL+uU8PkuvW1unYH1AVFAwW02e431Li7gfqs4hRUxhOwA5yQII78Tzvx2rNnrBbuP63LNoJUU9h5QB1B8O4AxXMzg7ru2+wWjKE5xP8Dy7WJ+mEFHhnS2RetJTrPrtvmU1G4Ps19otrGIS9K3NzhRofkkQxSE4OlCPRVgE5JhmOCxZ1effaW8+Cio1b1jWVQNZD7wjccooccX1hCLkYXUPPDaAQX8Zv4SCHHR8lG2Qi4Al/vqjhAdAk8JE3zi5OTYsMgd1KMs6D6p2V99yFmDgZshgZSu6bi6r3Xac2b/1aRopnh5wwPY36jmAIOQu/J/hEgqdDL3tekEbDEdDGrkjirEV+Ll+OjULoAk7uOzZSo74/eVyRdx3tB2t/lmxAGtJ7JvY9QdcxC5o9gEGxiQ8QfIm32oFm1bnsFdRxxZLpILG/eXmpZPqsPKVKhtDbFze+0tyZFeo6yVqng=
      KAAMEBOTT_SLACK_CLIENT_SECRET: AgB0JN7nu3ctuRr8fZR9cZ7pr4f/Ho9RXJZvObxlsAWGo/CZkw4CZlStzeJj+zhZLfrmlfJXa4WyLi1f4ohAj0I25183XY7iglJstSh+wgwi+Gt324YYVxEoveBC1/Hu2cC5TbNOuFMv/pqgI1jaSjQS7GOU6UbZuT2Jo5JRIonUfqk8w1zWuE+Slj3pXQh8OShQ3ue4Dey2Tg9HVwQy/KsksyAkwTBeBSX7+QOQNZh/8/SrZH9O/ErH/iUO/reP/wPFpBYdU99fS4/xgZm7cIK0zCtqeV40qQeMbpEy1mYaSw80bD2fsNN1hUuam9EJ4Uks9j/ji4ajiDyaGrEBHsZQVQLiXNVd+QcZ1JMZi5Tby6x9X8KKF1KofbOoHckwq3oVAEpb4PzzdkiOBOS8AYM5VXKTS1+sifbbE5TKwrgd9hkt0KZGRwOhllydgXK+afZyr6KXlvzdmuUOgzIB6VgEkSyuPv7KFTzheMEJUC6/GHsc0ltUZb//8b00plz6aYRFCcb8PAebSkjOsdpYPYc5J8styKhdZe85JJcmb3sIzKJJjQvNFYfsFE1x3qYJL9BEcUuADLKGfa7CSgrfgkJbMXbkmC9usCCGJxpr9xD5iFd5/4YSFylO1n7FvP2rGWE1q9EhyL8UqKb6hROFdWpSlycJ07Fu6XFUodiYpD+SigE5hhBg3+VChOomvB6JV/diZB2vnYmnZXPgbgu0wO6JmCeUtZ2GPyfqlyY/qUSwrg==
      KAAMEBOTT_SLACK_SIGNING_SECRET: AgCimM/1rd7GLMtnQPC2hGlU8TVvy69jm4kIG9Ldgrsp3sEJS3m66Rbx7vYvGniIldjFKaxcy9ykWdMlApNoebMZZgIDOc82oOd9S9+YzOiRvinbRSXbzp2OrOyTzcYtxLmQn3sjDYmeADr8tMRD9z7h4Lm52ZPaL6sPosFafRecCoUaT5wnkU/jvtgjQhnlA+M8mHTARcij8Rdr1vsmZSFwU9/aVBN5IHPeDcS1in6D090KLqqtsGC6HMZNxwz+xdJJabFXz8aWzGsQVXSpwHF66Mzk4uU4330vwU/Ah1tGDqcoQV93/Kpp2aUGDIr3ot/2+6UOYc7MYvKjPWpbbxkKxAO/im4x6OQW8wx3uR5JwgdFvHqlLRt3daNsxVb7IIMTd/r6/8sOBQ1GDoP+7RGx1kSwrpmM9v1Rw3uWFBiFUf5ic7iYRwnNKTr57NVFPf/cqbVeJBKcncuiF9h65l1kAmSAvsXy5DYQIwvvjso4RBn+ojSFSqSkIgSRTxBLhOFoGFOHe69bilYJ6aq7qcLyKwxiAv2qThZ9hInkdU9Yvu7fdwukAL6AjEReWPVpazOF1o8ykSQQwdpuFV0i+iBDZYU/U2W6WZTJd3CrmI0oqhK9hk8uZv8IbQKX+lSxXX5bDwmynylUMwysP1SJBPD+gc3edZbx3TP74EBYdXXGMSLfI+FKkd9TXkTUEph6IAIIVAL+dmg9PQGXN3k2RVSiqKLC8nCqR/VhBtbzLjhpQQ==
    ingress:
      enabled: true
      hosts:
        - kaamebott.vibioh.fr
    affinity:
      podAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: app.kubernetes.io/instance
                    operator: In
                    values:
                      - postgres
              topologyKey: "kubernetes.io/hostname"
    pprof:
      enabled: true
